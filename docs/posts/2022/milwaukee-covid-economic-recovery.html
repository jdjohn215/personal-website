<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mike Gousha and John Johnson">
<meta name="dcterms.date" content="2022-06-30">

<title>The worst didn’t come to pass for Milwaukee’s economy during the pandemic. The recovery remains a work in progress. – John Johnson's Internet Archive</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-bde7cfe73309ee1b4eca639e0a08c217.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-31XDQG3G4L"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-31XDQG3G4L', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">John Johnson’s Internet Archive</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Table of Contents</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../external-links.html"> 
<span class="menu-text">External Links</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bluebookmke.substack.com/" target="_blank"> 
<span class="menu-text">Blue Book Newsletter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#milwaukee-is-on-the-mend-but-with-a-ways-to-go" id="toc-milwaukee-is-on-the-mend-but-with-a-ways-to-go" class="nav-link active" data-scroll-target="#milwaukee-is-on-the-mend-but-with-a-ways-to-go">Milwaukee is on the mend, but with a ways to go</a></li>
  <li><a href="#milwaukee-unemployment-rate-is-still-relatively-high" id="toc-milwaukee-unemployment-rate-is-still-relatively-high" class="nav-link" data-scroll-target="#milwaukee-unemployment-rate-is-still-relatively-high">Milwaukee unemployment rate is still relatively high</a></li>
  <li><a href="#leisure-hospitality-workers-hit-hard" id="toc-leisure-hospitality-workers-hit-hard" class="nav-link" data-scroll-target="#leisure-hospitality-workers-hit-hard">Leisure hospitality workers hit hard</a></li>
  <li><a href="#number-of-business-establishments-is-up" id="toc-number-of-business-establishments-is-up" class="nav-link" data-scroll-target="#number-of-business-establishments-is-up">Number of business establishments is up</a></li>
  <li><a href="#the-impact-of-upstart-kitchen-sherman-phoenix" id="toc-the-impact-of-upstart-kitchen-sherman-phoenix" class="nav-link" data-scroll-target="#the-impact-of-upstart-kitchen-sherman-phoenix">The impact of Upstart Kitchen, Sherman Phoenix</a></li>
  <li><a href="#billions-in-federal-dollars-flow-into-the-region" id="toc-billions-in-federal-dollars-flow-into-the-region" class="nav-link" data-scroll-target="#billions-in-federal-dollars-flow-into-the-region">Billions in federal dollars flow into the region</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The worst didn’t come to pass for Milwaukee’s economy during the pandemic. The recovery remains a work in progress.</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mike Gousha and John Johnson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 30, 2022</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>In the darkest days of the coronavirus pandemic, uncertainty ruled the day for Wisconsin businesses and workers. Even as vaccines were becoming widely available in the spring of last year, Wisconsin Economic Development Corp.&nbsp;Secretary Missy Hughes worried about the fate of the state’s many small businesses, especially those with fewer than 20 employees.</p>
<p>“We’re potentially looking at losing 20 to 30 percent of these small businesses,” <a href="https://www.youtube.com/watch?v=Xtcga-EPpkY">she warned</a> during a virtual event with Marquette University Law School in March of 2021.</p>
<p>Today, it appears that worst-case scenario didn’t materialize. In a recent interview with us, Hughes cited several encouraging signs, including a 42% increase in new businesses formed during the pandemic. <a href="https://www.jsonline.com/story/money/business/2021/11/26/wisconsin-bounceback-grants-help-small-businesses-expand-across-state/8744474002/">A torrent of state and federal aid</a> — WEDC alone gave grants of $600 million to small businesses — combined with the grit and creativity of owners and workers averted an economic catastrophe. While the virus remains a concern, the greatest challenges facing most businesses right now are workforce shortages and inflation.</p>
<section id="milwaukee-is-on-the-mend-but-with-a-ways-to-go" class="level2">
<h2 class="anchored" data-anchor-id="milwaukee-is-on-the-mend-but-with-a-ways-to-go">Milwaukee is on the mend, but with a ways to go</h2>
<p>Has the economy fully recovered, or have we settled into a kind of new normal? More specifically, how is the economy of the state’s largest city and most populous county, Milwaukee, faring more than two years after the start of the pandemic? With two-thirds of the metropolitan area’s approximately 1.5 million residents living in Milwaukee County, its performance remains central to the region’s economic vitality.</p>
<p>New analysis done as part of the Milwaukee Area Project at Marquette University Law School’s Lubar Center shows an economy on the mend, but not yet fully recovered from the pandemic’s fallout. Among our findings:</p>
<ul>
<li><p>There does not appear to be a mass exodus from the labor force in the city of Milwaukee, but unemployment remains higher than it was before the pandemic.</p></li>
<li><p>Milwaukee County saw the number of business establishments actually increase from 2019 to 2021, but the number of employees across nearly all major sectors of the economy was down from two years ago.</p></li>
<li><p>Employment in some industries declined in 2020 but began to rebound in 2021. Others declined two years in a row, suggesting longer-lasting changes to the local economy.</p></li>
<li><p>Employment in some of the county’s best-paying sectors had not recovered to pre-pandemic levels by the end of 2021. That includes manufacturing and the professional and business service sectors.</p></li>
<li><p>As expected, the leisure and hospitality industry was hardest hit by the pandemic. Employment declined by 31% from 2019 to 2020. The sector has recovered somewhat, but employment remains well below pre-pandemic levels.</p></li>
<li><p>While restaurant employment fell, the total number of restaurants in the city of Milwaukee grew in 2021, a phenomenon fueled by strong growth among caterers and food trucks.</p></li>
<li><p>Businesses, non-profits, local governments, and individuals in Milwaukee County benefited greatly from the federal government’s financial assistance during the pandemic. For example, the Paycheck Protection Program (PPP) sent $2.3 billion to employers across the county and $1.9 billion of that amount went to entities in Milwaukee.</p></li>
</ul>
<p>Let’s look at the employment picture first.</p>
</section>
<section id="milwaukee-unemployment-rate-is-still-relatively-high" class="level2">
<h2 class="anchored" data-anchor-id="milwaukee-unemployment-rate-is-still-relatively-high">Milwaukee unemployment rate is still relatively high</h2>
<p>Since the Great Recession, Wisconsin’s unemployment rate has consistently been slightly lower than the national rate. But for decades, Milwaukee’s unemployment rate has been consistently higher than both the state’s and the nation’s. Far from changing this basic dynamic, the economic recovery appears to have exacerbated the gap between Milwaukee and the rest.</p>
<p>In May of 2019, prior to the pandemic, U.S. unemployment was 3.4%. It was 3.1% in Wisconsin and 4.2% in Milwaukee.</p>
<p>Unemployment spiked for all three in 2020, as the pandemic took hold and governments took steps to address a public health emergency. In April of 2020, unemployment stood at 14.4% nationally, 14.1% in Wisconsin, and 16.7% in Milwaukee.</p>
<p>But by May of this year, the U.S. and Wisconsin unemployment rates had returned, or even improved on, pre-pandemic levels. Not so for Milwaukee. Its 4.9% unemployment rate was nearly a full percentage point higher than May of 2019.</p>
<p>To count as unemployed, people must be looking for work. People who have left the workforce entirely don’t factor into the unemployment rate. But our analysis does not suggest a mass exodus from the labor force. In fact, the city of Milwaukee’s labor force in May of this year was 273,000, slightly higher than in 2019.</p>
<p>The number of unemployed people in Milwaukee was estimated to be 13,300 in May of this year. That’s down from 20,000 in May of 2021, but still higher than any other year since 2016.</p>
<p>One striking finding of our analysis was that almost none of the sectors in the Milwaukee County economy had fully recovered from the pandemic. The best source for employment data by sector is the Bureau of Labor Statistics’ Quarterly Census of Employment and Wages. Because these reports have a six-month lag time, they do not capture the most recent changes in employment. But they do give us our best and most reliable sense of which parts of the local job market are growing and shrinking. The numbers are only available on the county level, and we only discuss private-sector workers — leaving aside government employment.</p>
</section>
<section id="leisure-hospitality-workers-hit-hard" class="level2">
<h2 class="anchored" data-anchor-id="leisure-hospitality-workers-hit-hard">Leisure hospitality workers hit hard</h2>
<p>Not surprisingly, the leisure and hospitality industry was hammered by the pandemic. Employment fell from 48,000 to 33,000 in the first year of the pandemic. As of December 2021, employment had only partially recovered to 42,000.</p>
<p>Restaurant employees were hit especially hard. In the first year of the pandemic, full-service restaurants shed 33% of their workforce, nearly 4,900 workers. By December of 2021, just under 2,600 had been added back.</p>
<p>Likewise, food service contractors lost about half their jobs in 2020, with only about half of that recovered in 2021.</p>
<p>Higher paying occupations also struggled to return to pre-pandemic levels. The manufacturing sector in Milwaukee County saw employment decline by 4,000 in 2020, the first year of the pandemic, and 2021 showed a modest recovery of 700 workers.</p>
<p>In recent years, we have written about one of the bright spots in the Milwaukee economy, the growth of employment in the “management of companies and enterprises” sector in the last 20 years. New data suggests the pandemic may have interrupted or even halted that trend. During the first year of the pandemic, the number of employees in this industry fell by more than 1,000. The industry lost 400 more in 2021. Since these are generally prestigious, desirable, high-paying jobs, it raises the possibility that some of these positions are leaving Milwaukee entirely.</p>
<p>Other continued employment declines in 2021 may reflect a tight labor market for certain kinds of workers, not a lack of open positions. For instance, employment in nursing homes, assisted living facilities, and home health care all fell in both 2020 and 2021.</p>
<p>As the pandemic forced Americans to change their shopping habits, employment in a few industries increased. The most dramatic example can be found in the general warehousing and storage industry. Employment has more than doubled since 2019, gaining over 2,500 jobs. The number of employees working in construction by the end of 2021 also grew, slightly exceeding its 2019 benchmark.</p>
</section>
<section id="number-of-business-establishments-is-up" class="level2">
<h2 class="anchored" data-anchor-id="number-of-business-establishments-is-up">Number of business establishments is up</h2>
<p>Employment is one way to measure the recovery from the pandemic. Another is looking at the number of business establishments, or workplaces. Perhaps counterintuitively, the number of establishments grew while employment fell.</p>
<p>Sometimes, this reflects changes in where people worked. The federal Department of Health and Human Services used pandemic relief funding to encourage growth in home-based care for the elderly and disabled. Similarly, the number of child day care establishments grew even while employment in these places fell. Possibly, this reflects a growing preference for smaller providers.</p>
<p>Other cases of substantial establishment growth were among professionals and skilled trades, often related to shipping or housing, including marketing consultants, real estate agents, truckers, home remodelers, insurance agents, landscapers, and drywall contractors.</p>
<p>Starting a business during a pandemic takes a lot of planning, and a leap of faith. But some entrepreneurs did just that in 2020 and 2021, even in the kinds of service sector industries most disrupted by the pandemic. With the help of the Milwaukee City Clerk’s office, we created a unique dataset by matching business license recipients for tavern, restaurant and grocery activities in the city.</p>
<p>After a decline in 2020, most of those businesses showed a strong recovery in 2021. Compared to 2019, there were 6% more restaurants at the end of 2021. That was driven by strong growth among caterers and mobile food trucks. These two categories grew 47% since the pandemic began.</p>
<p>The ranks of large grocery stores were largely unaffected by the pandemic.</p>
<p>A few gas stations closed in 2020, but their numbers recovered in 2021.</p>
<p>Convenience stores recovered incompletely in 2021, but the data suggests their decline may predate the pandemic.</p>
<p>Bars and coffeeshops have struggled. The number of taverns — drinking establishments that don’t serve anything more complicated than frozen pizza — fell in both 2020 and 2021.</p>
<p>Likewise, a half-dozen coffeeshops closed in 2020, with no recovery in 2021.</p>
</section>
<section id="the-impact-of-upstart-kitchen-sherman-phoenix" class="level2">
<h2 class="anchored" data-anchor-id="the-impact-of-upstart-kitchen-sherman-phoenix">The impact of Upstart Kitchen, Sherman Phoenix</h2>
<p>Some parts of the city, including the 1st aldermanic district on the far north and 2nd aldermanic district on the northwest sides, saw significant declines in licensed bars, coffee shops and restaurants. These areas were also hard hit by the housing crisis of the Great Recession.</p>
<p>With fewer people working in office towers and less street traffic, the 4th aldermanic district downtown also saw a decline in these kinds of licenses.</p>
<p>In contrast, Milwaukee’s 14th district, home to the Bay View neighborhood, saw an increase in licenses for restaurants, coffee shops and grocery stores.</p>
<p>Even more entrepreneurial activity occurred in Milwaukee’s 7th aldermanic district during the last two years. Located on the north side and including the Sherman Park neighborhood, the 7th added 31 new licenses, the vast majority for new restaurants.</p>
<p>Digging a little deeper, the 7th saw an increase of at least 14 catering businesses and five mobile restaurant bases (the kitchen associated with one or more food trucks).</p>
<p>Much of this burst of entrepreneurial activity can be attributed to Upstart Kitchen, a food business incubator which offers commercial kitchen space to new businesses. The shared space at 43rd and Fond du Lac is located less than a mile from the Sherman Phoenix development, which has been another source of small business growth in the 7th district.</p>
</section>
<section id="billions-in-federal-dollars-flow-into-the-region" class="level2">
<h2 class="anchored" data-anchor-id="billions-in-federal-dollars-flow-into-the-region">Billions in federal dollars flow into the region</h2>
<p>As we wrote this piece, we couldn’t help but wonder about the local impact of federal assistance received during the pandemic, an impact that can now be measured in the billions of dollars. Here are numbers from a few of the biggest aid programs. To help give a sense of scale, total wages paid by all nonfarm employers in Milwaukee County added up to $26.9 billion in 2019, $26.7 billion in 2020, and $28.3 billion in 2021.</p>
<p>Using census data to find the eligible population, we estimate that Milwaukee County residents received about $2.2 billion directly from the three pandemic-related stimulus checks. Expanded child tax credits in 2021 paid Milwaukee County families around $240 million in total.</p>
<p>Our calculations suggest that the various temporary expansions of federal unemployment benefits added over $700 million to the checks of unemployed Milwaukee workers across the 1.6 million weekly claims made during the eligible months. Emergency rent relief in Milwaukee County totaled about $60 million through the first half of 2022.</p>
<p>Other stimulus efforts supported the private sector. The largest was the Paycheck Protection Program, which allowed small businesses to apply for low-interest (often forgivable) loans that could be used to cover payroll costs, rent, interest, and utilities.</p>
<p>Data from the Small Business Administration indicates the PPP paid out $2.3 billion to Milwaukee County businesses and non-profits, of which $1.9 billion went to the city of Milwaukee. $1.7 billion of the citywide loans have been forgiven.</p>
<p>The majority of PPP loans made to Milwaukee businesses appears to have gone to individuals. Of the more than 25,000 loans made in Milwaukee, 55% went to either sole proprietorships, independent contractors, self-employed individuals, or single member LLCs.</p>
<p>Collectively, these recipients got $222 million in loans, of which $143 million has been forgiven to date. This rate of loan forgiveness — 64% — is much less than the rates achieved by other kinds of borrowers. For example, the forgiveness rate for corporations is 96%.</p>
<p>Most of those corporations obtained their loans with the help of well-known banks. In contrast, thousands of the loans to individuals were processed through less well-known financial institutions located in places like California, Arizona, and Florida. Some of these loan originators have forgiveness rates as low as 49%.</p>
<p>The role government played in responding to a deadly virus will be debated for some time. What can be said is that the worst fears of top state officials were not realized.</p>
<p>In Milwaukee County, two years after the pandemic began, most Milwaukee County businesses are still in business. In fact, there are more business establishments today than there were two years ago.</p>
<p>But that masks the other story revealed by the data: At the start of this year, nearly every major sector of the local economy had fewer total employees than before the pandemic began. In Milwaukee County, at least, the recovery remains a work in progress.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>