<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mike Gousha and John Johnson">
<meta name="dcterms.date" content="2021-09-23">

<title>Census shows the Milwaukee area is more diverse, but overall growth remains sluggish – John Johnson’s Internet Archive</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-bde7cfe73309ee1b4eca639e0a08c217.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-31XDQG3G4L"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-31XDQG3G4L', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">John Johnson’s Internet Archive</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Table of Contents</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../external-links.html"> 
<span class="menu-text">External Links</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bluebookmke.substack.com/"> 
<span class="menu-text">Blue Book Newsletter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#hispanic-or-latino-population-growth-was-strong" id="toc-hispanic-or-latino-population-growth-was-strong" class="nav-link active" data-scroll-target="#hispanic-or-latino-population-growth-was-strong">Hispanic or Latino population growth was strong</a></li>
  <li><a href="#milwaukee-becomes-somewhat-less-segregated" id="toc-milwaukee-becomes-somewhat-less-segregated" class="nav-link" data-scroll-target="#milwaukee-becomes-somewhat-less-segregated">Milwaukee becomes somewhat less segregated</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Census shows the Milwaukee area is more diverse, but overall growth remains sluggish</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mike Gousha and John Johnson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 23, 2021</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><em>This article <a href="https://www.jsonline.com/story/news/solutions/2021/09/23/census-milwaukee-area-more-diverse-but-overall-growth-sluggish/5786829001/">originally appeared</a> in the Milwaukee Journal Sentinel.</em></p>
<p>It was an indelible image from a metropolitan area long known for its racial divide. As the Milwaukee Bucks pursued an NBA championship last July, tens of thousands of cheering fans stood shoulder to shoulder in the Deer District outside Fiserv Forum to watch the games on massive TV screens. The size of the watch parties was impressive. But what made the nightly celebrations memorable was the remarkable diversity, a sharp contrast to so many social gatherings in Milwaukee. Young and united by their love of the Bucks, the colorful crowds gave us a glimpse of the future, of what metro Milwaukee could be.</p>
<p>Today’s reality is less idyllic. Most people of color live in the city. Most suburbs are largely white. In fact, new analysis of the 2020 U.S. Census Bureau count by the Lubar Center for Public Policy and Civic Education at Marquette University Law School reveals that metro Milwaukee still leads the nation in Black-white residential segregation, just ahead of New York, Chicago, Cleveland, Detroit, St.&nbsp;Louis, and Buffalo.</p>
<p>But beyond that headline, a more nuanced story is playing out in metropolitan Milwaukee. We’re changing, becoming more diverse and less segregated, even as we experience stagnating growth.</p>
<ul>
<li><p>The new census count shows that the number of Hispanic, Asian, and Black suburbanites grew by tens of thousands, thanks to both in-migration and new births. Cities such as West Allis, Brookfield, Greenfield, and Brown Deer led the way in this long demographic transition.</p></li>
<li><p>For the first time in the metro area’s history, non-Hispanic white people were no longer the majority in two Milwaukee County suburbs — Brown Deer and West Milwaukee.</p></li>
<li><p>In the city of Milwaukee, Black, Hispanic, and Asian residents moved into areas that have been historically white. This resulted in sharp population losses in north and near south side aldermanic districts.</p></li>
<li><p>The city of Milwaukee’s population loss was almost entirely the result of fewer children. The number of housing units went up, but household size went down.</p></li>
<li><p>The white population in the metro area declined, down tens of thousands of residents from a decade ago.</p></li>
<li><p>Population growth in the metro area was far more sluggish than most of its Midwestern peers.</p></li>
</ul>
<p>These are some of the key findings from analysis conducted as part of the Lubar Center’s Milwaukee Area Project. The new census count shows a metro area stuck in a slow-growth mode. Population in the four counties — Milwaukee, Waukesha, Ozaukee and Washington — stood at 1,574,731 in the new census count. That’s an increase of 18,823 people in the last decade. The 1.2% growth rate is the metro’s second lowest ever, surpassing only the 1970s, when the population actually declined.</p>
<p>The census data also reveals a marked change in how Americans identify themselves. The number of people identifying as two or more races grew by 127% nationwide and 115% in the Milwaukee metro. The share of Milwaukee area residents simply marking “Some Other Race” grew by 309%.</p>
<p>Traditionally, researchers have focused on “race alone” statistics, because bi- and multi-racial individuals were a small group. Given the large increase in people choosing multiple races, considering both groups — race alone and race in combination — is necessary to get an accurate sense of the population.</p>
<p>The Census Bureau asks about Hispanic or Latino identity separately from race, so these numbers include respondents of any race. The numbers below for white, Black, Asian, and Native American people are for people who didn’t identify as Hispanic or Latino.</p>
<section id="hispanic-or-latino-population-growth-was-strong" class="level2">
<h2 class="anchored" data-anchor-id="hispanic-or-latino-population-growth-was-strong">Hispanic or Latino population growth was strong</h2>
<p>However measured, some things are very clear. Across the entire metro, the Hispanic or Latino population increased by 35,300, or 24%. Without strong Hispanic population growth, metro Milwaukee would have seen its population decline.</p>
<p>The Asian population grew as well. The population of those identifying as “Asian alone” increased by 20,200, or 44%, while “Asian in combination” grew by 5,100.</p>
<p>The white population in metro Milwaukee declined. The population of those identifying as “white alone” fell 63,400 or 6%. That was partially offset by a 28,300 increase in those identifying as “white in combination with something else,” but however you measure it, the white population in metro Milwaukee is smaller today than it was a decade ago.</p>
<p>Changes to Black and Native American population totals were less clear. The “Black alone” population declined by 5,600, or 2%. But “Black in combination” increased by 7,800.</p>
<p>The number of people who identified as “American Indian and Alaska Native” declined by 1,500, or 22%. But the number choosing this in combination with another race —usually white — grew by 8,600.</p>
<p>In addition to the way people identified themselves, some of the most striking findings were the dramatic population changes within the city of Milwaukee. The Census Bureau said the city lost 17,609 residents in the last decade. Its population now stands at 577,222, a 3% decline in the last decade and the lowest population since 1930. Some city officials have suggested there was an undercount, a claim we’ll address later.</p>
<p>According to the census data, all but four of the city’s 15 aldermanic districts lost population, with the steepest declines on the north and near south sides.</p>
<p>On the north side, the 15th district lost 4,800 residents. The adjacent 6th district lost 4,200. The population of the 7th district fell 3,300. The population loss also extended further northwest, to the 2nd aldermanic district, which saw a decline of 2,900 residents.</p>
<p>On the near south side, the 8th district lost 2,500 residents, the 12th 2,000.</p>
<p>Some of that population loss was offset by growth in other parts of the city, including downtown, the Third Ward, the Lower East Side, and Walker’s Point neighborhoods.</p>
<p>The 3rd aldermanic district covering the east side grew by 2,400 people. The 4th district covering downtown and the near west side gained 1,700 residents.</p>
<p>There was also growth on the far south and southwest sides. The 13th Aldermanic district added 1,700 new residents. The 11th added 1,600.</p>
<p>At first glance, that may be surprising. After all, these far south and southwest neighborhoods have historically been popular with public employees, and the end of the residency requirement affected these areas the most.</p>
<p>Looking at maps of population change by race suggests a possible explanation for the population increases. There has been a notable increase in the Hispanic population in the far south and southwest sides, plus an increase in the Black population in the Enderis Park area and far northwest side. The exit of public employees from these historically desirable neighborhoods may have created an opportunity for Black and Hispanic residents of the city’s more central neighborhoods to move outwards.</p>
</section>
<section id="milwaukee-becomes-somewhat-less-segregated" class="level2">
<h2 class="anchored" data-anchor-id="milwaukee-becomes-somewhat-less-segregated">Milwaukee becomes somewhat less segregated</h2>
<p>The population shifts in the last decade have resulted in the city becoming less segregated. The Hispanic population declined on the near south side and increased in most other parts of the city. The Black population declined on the near north side but increased in historically white areas. The white population declined everywhere except along the lake and parts of the near west and near north sides. The Asian population increased everywhere, particularly on the far south side.</p>
<p>Overall, the share of Milwaukee’s population identifying as Black alone fell by 15,100 in the last decade and stood at 38%. Another 2% identified as Black in combination with another race — usually white.</p>
<p>White alone fell by 33,800 to 32%. Five percent more identified as white plus another race.</p>
<p>Hispanic or Latino increased by 13,300 to 20%.</p>
<p>Those identifying as Asian alone increased by 9,400 to 5% of the city. Another 1% identified as Asian in combination with at least one other race.</p>
<p>The population identifying as Native American or Alaska Native fell by 1,000 to less than 1%, but the population choosing this identity in combination with something else grew by 800.</p>
<p>Like the city, there is increasing diversity in Milwaukee’s suburbs. The total number of suburban residents identifying as white (either alone or in combination) declined by 8,300, or 1%, over the last decade — the first such decline in any census. The biggest decreases were in West Allis, which has 6,500 fewer white residents than a decade ago. Greenfield lost 2,600 white residents, the city of Waukesha, 1,900.</p>
<p>The white population grew the most in Oconomowoc and the city of Pewaukee, which added 2,100 and 2,000 respectively.</p>
<p>The Black suburban population grew roughly 50%, adding 14,100 new residents. The biggest increases were in West Allis, which added 2,000 Black residents. Brown Deer added 1,400 and Wauwatosa 1,200.</p>
<p>The Asian population in the suburbs also grew by 50%, adding 14,600 new residents. The biggest increase was in Brookfield, which added 2,500. Menomonee Falls had 1,300 new Asian residents. Oak Creek had 1,100.</p>
<p>The Hispanic population in the suburbs grew by 18,200, an increase of 38%. The Latino population grew by 3,800 in West Allis, by 1,800 in Greenfield, and by 1,000 in Waukesha.</p>
<p>The census data also shows that for the first time, two suburbs, West Milwaukee and Brown Deer, were majority minority. Only 46% of West Milwaukee residents were non-Hispanic white in 2020, down from 61% a decade ago. In the latest census, 48% of Brown Deer residents identified as white. Ten years ago, 62% were white.</p>
<p>Still, the two suburbs remain outliers in metro Milwaukee. The third most diverse suburb was West Allis, where non-Hispanic white residents made up 73% of the population. Greenfield was 75% white, Cudahy 78%, Waukesha and Oak Creek, 79%. All other suburbs were at least 80% white.</p>
<p>The suburbs surrounding Milwaukee continue to fuel what population growth there is in the metro area. Brookfield added 3,500 new residents in the last decade, Menomonee Falls grew by 2,900. Oak Creek and Mequon both added more than 2,000 residents.</p>
<p>There was also growth in the far western suburbs. The city of Pewaukee added 2,700 residents, a 21% increase in population. Oconomowoc grew by 2,400, a 15% increase.</p>
<p>Yet there are signs that population growth is slowing outside the city. One suburb, South Milwaukee, lost nearly 400 people. Waukesha County added 17,100 people in the last decade, an increase of 4.4%. But that is the lowest growth rate for the county since the 1870s.</p>
<p>Washington County grew by 4,900 new residents, an increase of 3.7%. That’s down from 12.3% in the 2000s, and 23.3% in the 1990s. This is the first decade since the 1930s in which Washington County didn’t experience double-digit growth.</p>
<p>As part of our analysis, we compared metro Milwaukee’s population growth in the last decade to that of other Midwestern cities. The only significant metro that grew more slowly was Cleveland’s, which had a population increase of 11,000, a 0.5% growth rate. Again, metro Milwaukee added approximately 18,800 people, for a growth rate of 1.2%</p>
<p>During the same period, metropolitan Madison added 75,400 people and grew at a 12.4% rate. The Indianapolis metro area added 223,200 residents, an 11.8% increase. The population of the Minneapolis-St.&nbsp;Paul metro was up 356,600 over a decade ago, an increase of 10.7%. Kansas City’s metro area grew by 182,700, a 9.1% increase. Metropolitan Cincinnati’s population increased 119,200, or a rate of 5.6% growth.</p>
<p>The metropolitan Chicago area grew at a pace more like ours, 1.7%. St.&nbsp;Louis had the same growth rate as metro Milwaukee, 1.2%</p>
<p>If you compare only cities, and not metro areas, Milwaukee’s 3.0% decline was better than St.&nbsp;Louis, which lost 5.5% of its population, and Cleveland, which lost 6.1% of its residents.</p>
<p>On the other side of the ledger, Kansas City, Minneapolis, and Madison all grew by double digits.</p>
<p>In the new census count, the Milwaukee area ranked as the 41st largest metro in the country. It was 40th 10 years ago. The area ranked 285th out of 392 metro areas in the rate of population growth in the last decade.</p>
<p>All measures of Milwaukee’s population agree that there has been a decline since 2010. The size of that decline in the 2020 census came as a surprise because it was 12,600 people fewer than the most recent estimate from the Census Bureau’s Population Estimates Program (PEP), which is calculated using administrative data on births, deaths, and migration.</p>
<p>Some observers have suggested the census undercounted Milwaukee, but another explanation is plausible. Compared with the 2020 census, PEP much more accurately estimated the county’s population as a whole but assigned too much of it to the city and too little to the suburbs. PEP used the 2010 average household size to divide the county’s population into municipalities. But in the latest census, Milwaukee City’s average household size declined, while the suburbs stayed about the same. Take a typical set of 20 homes in Milwaukee and about two fewer people live in them now, compared with 2010.</p>
<p>According to the census, the number of children in Milwaukee declined by 16,900 —consistent with shrinking household sizes. Total housing units actually increased over this period, but typical new construction was designed for singles and couples instead of families with kids. Even as the number of kids plummeted, the census counted only 700 fewer adults in Milwaukee.</p>
<p>Other data sources also show fewer children. For decades, the number of kids being born in Milwaukee has been smaller than the number of kids born 18 years previously. About 16,000 fewer babies were born during 2010-2019 than during 1992-2001—the cohort who became adults during the 2010s.</p>
<p>Population growth is not necessarily the only or even best way to measure the health and vitality of a major metropolitan area. Bigger is not always better, if it means a diminished quality of life for its citizens.</p>
<p>But population growth does tell us something about whether a city or metro area is viewed as a desirable place to live, work, and raise a family. The images from the Deer District in July spoke volumes about the possibilities of Milwaukee, about the destination we could be in the future. The new census count suggests we’re not there yet.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>