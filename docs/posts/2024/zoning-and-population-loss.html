<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="John Johnson">
<meta name="dcterms.date" content="2024-07-28">

<title>How zoning reform could reverse population loss in many Milwaukee neighborhoods – John Johnson’s Internet Archive</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-bde7cfe73309ee1b4eca639e0a08c217.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-31XDQG3G4L"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-31XDQG3G4L', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">John Johnson’s Internet Archive</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Table of Contents</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../external-links.html"> 
<span class="menu-text">External Links</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bluebookmke.substack.com/" target="_blank"> 
<span class="menu-text">Blue Book Newsletter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#interactive-1960-tracts-map" id="toc-interactive-1960-tracts-map" class="nav-link active" data-scroll-target="#interactive-1960-tracts-map">interactive 1960 tracts map</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">How zoning reform could reverse population loss in many Milwaukee neighborhoods</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>John Johnson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 28, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Lots of people want to live in Washington Heights—the Milwaukee neighborhood sandwiched between Washington Park to the east and Wauwatosa to the west. The median home price grew by $92,000 (53%) from 2019 to 2023, nearly double the citywide increase of $48,000.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Average rents grew by 16% in the past two years alone, double the national increase of 8%.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Based on my own analysis of arm’s length, single property Real Estate Transaction Returns file with the Wisconsin Department of Revenue.</p></div><div id="fn2"><p><sup>2</sup>&nbsp;Based on Zillow’s Observed Rent Index (ZORI) values for the zip code 53208 and the US average in May 2022 and May 2024.</p></div></div><p>Despite this, Washington Heights is shrinking. The neighborhood’s population fell from 7,200 in 2000 to 6,741 in 2010 and 6,360 in 2020. That is a 12% drop in 20 years.</p>
<p>The reasons are not complicated. The number of households has stayed about the same, but the average household size has fallen from 2.47 in 2000 to 2.36 in 2010 and 2.22 in 2020. Families are having fewer children, and more adults are living alone.</p>
<p>Imagine a typical block with 32 single-family homes (16 lots on each side of the street). In 2000, that block had 79 residents, it had 76 in 2010, and 71 in 2020. Across many blocks, these small changes add up quickly.</p>
<p>Milwaukee’s lack of affordable, quality housing for low income residents is a central focus among local policymakers, funders, and nonprofits. The situation in Washington Heights, a solidly middle class neighborhood, points to a different, but related dilemma. Even in neighborhoods where would-be residents can afford the cost to build new housing, adequate supply simply doesn’t exist, and current land use regulations inhibit its construction.</p>
<p>This lack of supply has cascading effects. Equity from rapidly increasing home values may please existing homeowners, but it also saddles them with higher property taxes. The long term decline in the number of adult residents means fewer people are responsible for funding the same amount of infrastructure. People who are priced out of buying or renting in one neighborhood instead turn to a cheaper one, repeating the same pattern of displacement at a lower income bracket.</p>
<p>Washington Heights’ housing stock today is little changed from the early 20th century. Only 6 houses have been built in the neighborhood since 1960 (likely replacing older houses). Meanwhile, the net number of housing units has slowly shrunk. Since 1990, the neighborhood has lost 45 units, thanks to duplexes being downgraded to single family homes.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> (Only 3 single family homes have been converted to duplexes.)<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;And some triplexes being dropped to duplexes.</p></div><div id="fn4"><p><sup>4</sup>&nbsp;All of these statistics are drawn from the City Assessor’s Master Property File (MPROP).</p></div></div><p>Looking further back, the change is even more astonishing. Milwaukee’s population hit its peak in 1960, when 741,000 people lived within city limits. To compare how neighborhoods have changed since then, I matched 2020 census blocks with the larger 1960 census tracts.</p>
<p><em>See the bottom of this post for an interactive map showing this data across the entire city.</em></p>
<p>Consider the greater Washington Heights area, outlined in blue on the map below. (1960 tracts rarely exactly match current neighborhood boundaries.) This area had a 1960 population of 15,635 people living in households.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> That fell by 31%, to about 10,800 in 2020. The average household size fell from 2.9 to 2.2. The number of children declined by nearly 2,000 and the number of adults by 2,900.</p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;The remainder of this article ignores the group quarters population, which is generally small and varies across time as residential institutions open and close.</p></div></div><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="graphics/washington-heights.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="map showing the general Washington Heights area"><img src="graphics/washington-heights.png" class="img-fluid figure-img" alt="map showing the general Washington Heights area"></a></p>
<figcaption>map showing the general Washington Heights area</figcaption>
</figure>
</div>
<p>In other words, about 4,800 fewer people live within immediate walking distance of the historic commercial corridors along Vliet Street, North Avenue, and (at the time) Lloyd Street. And these commercial districts have changed too. Along Vliet, Lloyd, and North, just between 47th Street and 60th, there were 12 food stores in 1960 (including corner stores &amp; butchers) along with: 7 bakeries, 6 pharmacies, 10 taverns, 5 restaurants, 2 hardware stores, and dozens of other retail stores or service providers.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;Businesses are from the 1960 Milwaukee City Directory.</p></div></div><p>The number of restaurants along Vliet and North has more than doubled since 1960, and the number of taverns has held mostly steady. But other kinds of retail have vanished. No bakeries and only two food retailers remain. There are no hardware stores and only one small pharmacy.</p>
<p>Neighborhood grocery stores have been replaced by large supermarkets surrounded by parking lots across the country. In some measure, this reflects changing consumer preferences. But the decline in foot traffic along Milwaukee’s old neighborhood “downtowns” has also contributed to their diminished retail offerings. The commercial corridors in Milwaukee’s older neighborhoods were built without parking lots in an era when thousands more people lived within walking distance.</p>
<p>The story of Washington Heights is common across Milwaukee. As I’ve <a href="https://urbanmilwaukee.com/2023/05/19/milwaukee-countys-four-different-population-trajectories/">previously written</a>, about 40% of the city is in “stable decline,” characterized by high occupancy rates but shrinking populations due to declining household sizes.</p>
<p>Consider the portion of Bay View north of Oklahoma Avenue. These tracts have lost 5,600 residents since 1960. It would take nearly 3,500 more housing units to restore the population of 60 years ago, given current household sizes. That is despite the fact that Bay View has built more housing. The number of units has grown by more than 700 since 1960. Without that, the neighborhood’s population would have plummeted by perhaps another 1,200 residents.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn7"><p><sup>7</sup>&nbsp;This is a rough calculation, found by multiplying the number of net new units (715) by a typical occupancy rate (93%), then multiplying the product by Bay View’s current average household size of 1.9.</p></div></div><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="graphics/bay-view.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="map showing the northern Bay View area"><img src="graphics/bay-view.png" class="img-fluid figure-img" alt="map showing the northern Bay View area"></a></p>
<figcaption>map showing the northern Bay View area</figcaption>
</figure>
</div>
<p>Some neighborhoods have built enough new housing to stave off the post-1960 housing collapse, and their historic commercial districts reflect that.</p>
<p>The two census tracts on the east side between North Avenue and Park Place are good examples of this approach. Together, they have added 1,600 net new housing units since 1960. This has allowed the neighborhood’s overall population to remain steady despite the average household size falling.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn8"><p><sup>8</sup>&nbsp;The two census tracts have seen a roughly 100 person decline (-2%) in the household population between 1960 and 2020. The number of adults grew while the number of children fell.</p></div></div><p>Small wonder then, that the neighborhood has sustained a genuinely comprehensive commercial district. The area around Downer Avenue includes a full grocery store, a bakery, hardware store, pharmacy, dry cleaner, and multiple medical providers.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="graphics/downer.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="map showing the area around Downer Avenue"><img src="graphics/downer.png" class="img-fluid figure-img" alt="map showing the area around Downer Avenue"></a></p>
<figcaption>map showing the area around Downer Avenue</figcaption>
</figure>
</div>
<p>Much of Milwaukee’s east side benefits from zoning rules that permit multi-family developments, whether apartment buildings or condos. Over 70% of the post-1960 construction in the two tracts near Downer Avenue occurred in parcels with high-density zoning classifications.</p>
<p>Other neighborhoods, like Walker’s Point and parts of Bay View have successfully converted former industrial land and buildings into new housing. A current example is the redevelopment of the <a href="https://urbanmilwaukee.com/2024/02/16/friday-photos-demolition-work-begins-for-massive-affordable-housing-development/">Filer and Stowell</a> complex, which plans to build 576 new units across eight apartment buildings.</p>
<p>Downtown Milwaukee has added a great deal of housing, often by converting old office buildings. An ongoing effort to redevelop the previously foreclosed <a href="https://urbanmilwaukee.com/2024/07/03/downtown-tower-could-be-redeveloped-with-historic-tax-credits/">100 East building</a> could create 350 apartments across its 35 stories.</p>
<p>None of these kinds of construction are an option for neighborhoods like Washington Heights. Unlike the east side, Washington Heights has no parcels zoned for high density development. Unlike Bay View or Downtown, Washington Heights was built as a purely residential neighborhood, so it doesn’t have legacy industrial sites or underused office buildings.</p>
<p>Washington Heights has also seen few home demolitions, so it mostly lacks the large (or adjacent) empty lots necessary to build <a href="https://urbanmilwaukee.com/2021/07/02/friday-photos-new-townhomes-in-riverwest/">townhomes</a>. In short, there are few existing options for restoring the historic population density to neighborhoods like this.</p>
<p>The city’s new draft zoning reform plan, <a href="https://engage.milwaukee.gov/growingmke/growing-mke-draft-plan">Growing MKE</a>, proposes a set of changes to make growing the housing supply in places like Washington Heights more possible.</p>
<p>If adopted, the plan would change the kinds of housing which can be built under the city’s various residential zoning classes. All residential zones would permit the construction of single-family homes, accessory dwelling units, townhomes, duplexes, triplexes, and cottage courts. Those areas already zoned for duplexes (a <a href="https://milwaukeemultimodal.substack.com/p/zoning-regulations-in-milwaukee-laymans">substantial portion</a> of the city) would also allow 3 and 4-unit buildings. Another provision would make it easier to build apartment buildings on lots already zoned for them.</p>
<p>Looking at the city as a whole, the most consequential aspects of Growing MKE are likely the provisions that encourage new multi-unit developments, from townhouses and cottage courts to quadplexes and small apartment buildings. These have the potential to grow the city’s housing stock the most.</p>
<p>However, accessory dwelling units (ADUs) are the aspect of the Growing MKE plan most relevant to a neighborhood like Washington Heights. Most parcels in the neighborhood include a backyard with a garage that could be replaced with, or modified to include, a small house.</p>
<p>These kinds of small backlot houses are <a href="https://saruprc.ad.uwm.edu/pdf/sarupwebsitedocs/upgallery/apw-accessorydwellingunits_milwaukee-fall2020.pdf">common in Milwaukee’s older neighborhoods</a>, where they are often called “carriage houses.” Other houses with large basements could be converted to include an “internal ADU.”</p>
<p>There are about 2,000 houses in Washington Heights. Half of their owners have held them for 8 years or more. Given the rapid increase in home values, many residents have accumulated significant equity in their homes, which could be used to finance ADU construction.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn9"><p><sup>9</sup>&nbsp;ADU construction prices generally range from $60,000 to $225,000, according to data from Angi. Conversions are cheaper, new builds are more expensive.</p></div></div><p>ADU construction tends to <a href="https://www.cato.org/blog/results-accessory-dwelling-unit-reform-so-far">grow quickly</a> in cities after the rules are changed to encourage them. Still, it’s not an overwhelming flood. In 2023, Seattle <a href="https://www.seattle.gov/documents/Departments/OPCD/OngoingInitiatives/EncouragingBackyardCottages/OPCD-ADU-Report-2023.pdf">issued permits</a> for 987 ADUs, up from 246 in 2018 (prior to reforms passed in 2019).</p>
<p>These numbers may seem low compared to the massive need for housing, but new construction is currently even more rare. Fewer than 150 single family homes or duplexes were built in Milwaukee in the last 4 years combined.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn10"><p><sup>10</sup>&nbsp;According to the YR_BUILT field of the MPROP file.</p></div><div id="fn11"><p><sup>11</sup>&nbsp;This stylistic calculation assumes an unrealistic 100% occupancy rate. It also assumes that the new housing units would have the same average household size as the existing housing stock.</p></div></div><p>What would it take for Washington Heights to stop shrinking? At the current pace, households are shrinking by about 0.1 persons per decade. Put differently, every 10 years, each 10 houses lose 1 resident. There are about 2,900 households in Washington Heights. At that pace of change, the neighborhood will lose about 290 more residents by 2030. Avoiding that loss would require building around 140 more units.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p>
<p>The zoning reforms proposed in the Growing MKE plan are intended to encourage property owners in the city to build more housing on their own. This will likely mainly happen in the parts of the city which are already relatively prosperous.</p>
<p>For the half of Milwaukee renters who spend more than 30% of their income on rent (and the quarter who spend 50% or more), market solutions alone are unlikely to build a sufficient quantity of actually affordable housing. But encouraging new housing construction in the parts of the city where the market will fund it is a crucial way for the city to create more options for property owners and renters alike, while also expanding its tax base.</p>
<p>By allowing the market to build housing in places where existing demand will pay for it, the city can better steer its resources toward subsidizing housing development in the neighborhoods of Milwaukee where the need is dire but the market will not provide it.</p>
<section id="interactive-1960-tracts-map" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="interactive-1960-tracts-map">interactive 1960 tracts map</h2>
<div class="column-page">
<iframe width="100%" height="500" src="post-assets/mke-1960-tracts-leaflet.html" title="1960 tracts map"></iframe>
</div>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>