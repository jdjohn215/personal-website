<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mike Gousha and John Johnson">
<meta name="dcterms.date" content="2024-10-09">

<title>Homes in metro Milwaukee have long been considered affordable. Is that still true? – John Johnson’s Internet Archive</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-bde7cfe73309ee1b4eca639e0a08c217.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-31XDQG3G4L"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-31XDQG3G4L', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">John Johnson’s Internet Archive</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Table of Contents</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../external-links.html"> 
<span class="menu-text">External Links</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bluebookmke.substack.com/" target="_blank"> 
<span class="menu-text">Blue Book Newsletter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Homes in metro Milwaukee have long been considered affordable. Is that still true?</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mike Gousha and John Johnson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><em>This article <a href="https://www.jsonline.com/story/news/2024/10/09/can-a-typical-worker-still-buy-a-home-in-milwaukee-increasingly-no/75394180007/">originally appeared</a> in the Milwaukee Journal Sentinel.</em></p>
<p>For a moment, imagine you’re a mail carrier. You’re early in your career and make just over $48,000 a year, or the median wage for all workers in the Milwaukee area. Could you buy a house in the city of Milwaukee on your salary alone?</p>
<p>The answer — which we’ll share later in this story — can help us better understand Milwaukee’s evolving housing picture.</p>
<p>Owning a home has long been a part of the American dream, and for those looking to buy, especially first-timers, the state’s largest city offered access. Milwaukee featured dozens of neighborhoods where middle and working-class residents could afford to buy a house, often on a single income. But the city’s housing market changed dramatically in recent years. For many prospective homebuyers, what was possible only five years ago is no longer realistic today.</p>
<p>In our latest Milwaukee Area Project examining life in the metro, we sought to answer the question: Is housing in the city (and its suburbs) still affordable? We focused on the period from 2019 to 2024 — from before the pandemic upended existing economic trends to where the housing market is today.</p>
<p>Some of what we discovered wasn’t surprising. Buying a house is more expensive today, relative to income, than at any point in the last two decades. This is true in Milwaukee and the nation. The increase in housing costs in the last five years outpaced wage gains. That resulted in a growing number of workers in the metro area being priced out of the market.</p>
<p>It’s also true that the city of Milwaukee remains a relative “bargain” compared to other major cities — not just Los Angeles, San Francisco, and New York, but Minneapolis, Chicago and even Madison.</p>
<p>Buying a house in the city of Milwaukee is significantly more affordable than the national average. This has been the case for decades and it’s still true today. For most of the last 25 years, the metro’s median salary was enough on its own to purchase the typical house in the city. Buying a house was even easier for households with two wage earners.</p>
<p>Still, costs here have risen enough to challenge the value proposition of owning a home. Our research found that even among single-family homes in the city of Milwaukee, it is now generally cheaper to rent than to buy.</p>
<p>When we talk about what is affordable, we use the definition the U.S. Department of Housing and Urban Development uses. Standard financial advice is that a household should spend no more than 30% of its gross (pre-tax) income on housing expenses. Some are comfortable with spending more, but the 30% guideline is a good measure of affordability.</p>
<p>Escalating costs, even in comparatively affordable Milwaukee, are making homeownership more difficult. A typical less expensive (25th percentile) house in the city cost about $71,000 in 2019. Today it costs $126,000, a 77% increase. An average home cost $126,000 in 2019. Today, it goes for $206,000. And a more expensive (75th percentile) home in the city went for just shy of $200,000 in 2019. Today, that home sells for $294,000.</p>
<p>Further, while we hear a lot about homes selling for cash offers, that’s not the way most prospective homebuyers will buy a house. They’ll need a mortgage. So, the number that really matters is not the home’s sticker price, but the monthly payment they can afford. That payment includes principal, interest, taxes, and insurance.</p>
<p>Those monthly payments increased far faster than home values because of rapidly rising interest rates and increasing home insurance rates. To get a better sense of what’s happened, we assumed common characteristics for a first-time homebuyer, including 5% down and 1% private mortgage insurance. We found that the monthly cost to buy the average home in the city jumped from $1,023 in 2019 to $1,877 in 2024.</p>
<p>In 2019, the monthly payment needed to buy the average city of Milwaukee house worked out to 30% of the median full-time salary in the metro. That jumped to 45% in 2024 (based on preliminary salary estimates).</p>
<p>While two wage earners in a home can help with the affordability issue, it’s worth noting that <a href="https://www.jsonline.com/story/news/2024/06/27/milwaukee-families-have-radically-changed-in-50-years-over-50-years-present-challenges-opportunities/73171781007/">our previous research</a> found that single-person households now make up more than one-third of the households in the city.</p>
<p>Even in 2019, the city of Milwaukee was the only municipality in the county where a single average wage earner could afford the average house by themselves. That affordability is due in part to a larger supply of smaller homes. It also reflects concerns about crime and struggling schools, which depress prices in some neighborhoods.</p>
<p>But in Milwaukee County, at least, a couple — each earning the average salary — could still afford the average home in most suburbs. That, too, is more challenging today.</p>
<p>The ranks of affordable suburbs shrank considerably in the last five years. By 2023, only seven of 19 Milwaukee County municipalities were affordable for a family with two median wage earners (a total of $97,000).</p>
<p>Here’s another way to look at this trend. We identified professions with incomes closest to the affordability threshold, where monthly house payments equal 30% of the average wage.</p>
<p>In 2019, a typical first-line factory supervisor making $63,000 could afford the average house in Greenfield. In 2023, it took a salary of $100,000 to afford that same house, typical of what electrical engineers earn.</p>
<p>In 2019, a typical tool and die maker with a median salary of $52,000 could afford the average house in West Allis. In 2023, it took a salary of $83,000 to afford that house, typical of what a registered nurse earned.</p>
<p>Other occupations saw homeownership slip out of reach entirely.</p>
<p>We also looked at the cost of houses in Waukesha, Ozaukee and Washington counties. Buying a home in the WOW counties is considerably more expensive than the national average. In Waukesha, the price of the average house grew from $324,000 in 2019 to $455,000 in 2024. In Ozaukee, it jumped from $335,000 to $452,000. In Washington, historically the most affordable of the three counties, the average home went for $277,000 to $392,000.</p>
<p>A key factor in why housing affordability remains elusive for so many is wage growth in the metro area. Wages rose in the last five years, but not nearly as quickly as home prices.</p>
<p>Data from the Bureau of Labor Statistics shows that in 2001 workers in metro Milwaukee earned a bit more than workers nationally. This was true across the board, for those making a little and those making a lot. For example, an average paid worker in metro Milwaukee made about $1,330 more a year than the national average.</p>
<p>But by 2023, higher earners in metro Milwaukee had fallen behind the national average. One noteworthy example: the highest paid workers in metro Milwaukee took home $610 more than the national average in 2001. In 2023, they made $16,330 less.</p>
<p>Workers in the bottom half of the income ladder overall still were above the national average, but their advantage had shrunk. And the lowest paid workers had fallen behind. In 2001, they made $1,170 more than the national average. In 2023, they made $720 less.</p>
<p>The sharp increase in housing prices and the jump in monthly costs for ownership could lead some to reconsider the benefits of owning a home. That’s a significant change. As late as 2020, we found that owning a home usually resulted in lower monthly costs than renting a single family house, even when including maintenance costs.</p>
<p>Today, it’s a different story. That’s because, even among single family homes, the monthly costs associated with ownership have increased so much faster than the cost of rent.</p>
<p>Researchers know considerably less about the rental market than home values. The results of every property sale are publicly available, but there is no central repository for information about rents. So, we turned to the private company Zillow, whose data and methodology offer the best insights into the local rental market.</p>
<p>From 2019 to 2024, the monthly costs needed to buy an average home in the city of Milwaukee grew by $854 or an increase of 83%. The average monthly rent grew by $316, or 31%. Put another way, the monthly payments associated with homeownership — nearly $1,900 — were $550 more than the typical rent.</p>
<p>That was true elsewhere in the metro. Typical rents in Milwaukee and Waukesha counties, for example, grew about 30%. For those workers most likely to be renting (those in the bottom half of the income ladder) wages grew faster than inflation in the early 2020s, closely tracking the growth in rents while trailing skyrocketing ownership costs.</p>
<p>Despite claims that rents here have risen unusually quickly, the data suggests otherwise. Among the nation’s 100 largest metro areas, rent increases in metro Milwaukee ranked higher than most in the last year. But from 2019 to 2024, our percentage growth in rents was slower than in all but 25 of the nation’s 100 largest metros. Metro Milwaukee had the 21st cheapest rents in 2019, among the largest 100. In 2024, it was the 13th cheapest.</p>
<p>Still, that comes as little consolation to those on fixed incomes in the metro, a surprisingly large number. Our research found that more than a quarter of renter households in the metro Milwaukee area include no employed people. Most are likely retirees while others are students or live on public assistance. Affording rent has likely become much more difficult for them.</p>
<p>For some, the last five years have been an enormous source of frustration. Their hopes of buying a house became increasingly bleak. In the city of Milwaukee, prospective working-class homebuyers often found themselves shut out of the market as prices for inexpensive and average houses rose sharply, interest rates spiked, and out-of-state investors went on a buying spree. In 2019, nearly a quarter of the city’s houses cost $71,000 or less. Today, that market has largely disappeared.</p>
<p>To put it in more personal terms, let’s return to our example of the early career mail carrier. With careful budgeting, that postal worker could have afforded the average house in Milwaukee in 2019. Today, that is no longer the case.</p>
<p>What also makes the last five years frustrating for some is that they missed an opportunity to save money and build wealth. In 2019, the monthly cost needed to buy the average house was about $850 lower than in 2024. Property records show that more than 3,100 present-day homeowners bought their house in 2019. By staying current on their payments, we estimate that they have built, on average, $78,000 in equity.</p>
<p>In several years of writing about housing in the Milwaukee area, we have been struck by how quickly the market can change. With a new push for more housing and the prospect of lower interest rates, it may pivot yet again in the coming years. Owning a house may continue to be part of the American dream.</p>
<p>But for now, in metro Milwaukee, that dream is harder to realize.</p>
<p>Data Note: We used several data sources in this analysis. Home value data is from the smoothed, seasonally adjusted version of the Zillow Home Value Index. Rent data is from the smoothed, seasonally adjusted Zillow Observed Rent Index. Wage data is from Bureau of Labor Statistics Occupational Employment and Wage Statistics program. The BLS calculates annual full-time wages by multiplying hourly rates by 2,080. All annual estimates are as of May of each year. We estimate monthly PITI payments using mortgage rates provided by Freddie Mac, gross municipal tax rates from the Wisconsin Department of Revenue and the Wisconsin Policy Forum, and insurance premiums from Census Bureau.</p>
<p>For complete methodological details and additional analysis, see the Marquette Law School Faculty Blog post with the same date as this article.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>